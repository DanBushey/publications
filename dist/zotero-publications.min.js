!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ZoteroPublications=t()}}(function(){return function t(e,n,o){function r(a,l){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return r(n?n:t)},d,d.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({"/srv/zotero/my-publications/src/js/api.js":[function(t,e,n){(function(e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(t){for(var n=[],o={},r=t.length;r--;){var i=t[r];if(i.data&&i.data.abstractNote){var a=i.data.abstractNote.substr(0,e.shortenedAbstractLenght);a=a.substr(0,Math.min(a.length,a.lastIndexOf(" "))),i.data.abstractNoteShort=a}i.data&&i.data.parentItem?(t.splice(r,1),n.push(i)):o[i.key]=i}var l=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var i=p.value;o[i.data.parentItem]?(o[i.data.parentItem][s.CHILD_ITEMS_SYMBOL]||(o[i.data.parentItem][s.CHILD_ITEMS_SYMBOL]=[]),o[i.data.parentItem][s.CHILD_ITEMS_SYMBOL].push(i)):console.warn("item "+i.data.key+" has parentItem "+i.data.parentItem+" that does not exist in the dataset")}}catch(c){u=!0,d=c}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw d}}}return t}function i(t,e,n){var o=/<(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*))>;\s*rel="next"/;return n=n||[],new Promise(function(r,a){fetch(t,e).then(function(s){s.status>=200&&s.status<300?s.headers.has("Link")?!function(){var t=s.headers.get("Link").match(o);t&&t.length>=2?s.json().then(function(o){r(i(t[1],e,l["default"].union(n,o)))}):s.json().then(function(t){r(l["default"].union(n,t))})}():s.json().then(function(t){r(l["default"].union(n,t))}):a("Unexpected status code "+s.status+" when requesting "+t)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.processResponse=r,n.fetchUntilExhausted=i;var a="undefined"!=typeof window?window._:"undefined"!=typeof e?e._:null,l=o(a),s=t("./data.js")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./data.js":"/srv/zotero/my-publications/src/js/data.js"}],"/srv/zotero/my-publications/src/js/app.js":[function(t,e,n){(function(n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){this.config=a["default"].extend({},this.defaults,t)}var i="undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null,a=o(i),l=t("./render.js"),s=t("./api.js"),u=t("./data.js");r.prototype.defaults={apiBase:"api.zotero.org",limit:100,citationStyle:"apa-annotated-bibliography",include:["data","citation"],shortenedAbstractLenght:250,group:!1,expand:"all"},r.prototype.get=function(t){var e=this.config.apiBase,n=this.config.limit,o=this.config.citationStyle,r=this.config.include.join(","),i="//"+e+"/"+t+"?include="+r+"&limit="+n+"&linkwrap=1&order=dateModified&sort=desc&start=0&style="+o,a={headers:{Accept:"application/json"}};return new Promise(function(t){(0,s.fetchUntilExhausted)(i,a).then(function(e){e=(0,s.processResponse)(e,this.config);var n=new u.ZoteroData(e);"type"===this.config.group&&n.groupByType(this.config.expand),t(n)}.bind(this))}.bind(this))},r.prototype.render=function(t,e){if(t instanceof u.ZoteroData){var n=t;(0,l.renderPublications)(e,n)}else{var o=t;this.get(o).then(a["default"].partial(l.renderPublications,e))}},e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api.js":"/srv/zotero/my-publications/src/js/api.js","./data.js":"/srv/zotero/my-publications/src/js/data.js","./render.js":"/srv/zotero/my-publications/src/js/render.js"}],"/srv/zotero/my-publications/src/js/data.js":[function(t,e,n){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function o(t){this.raw=t,this.data=t,this.grouped=a,Object.defineProperty(this,"length",{enumerable:!1,configurable:!1,get:function(){return this.data.length}})}Object.defineProperty(n,"__esModule",{value:!0}),n.ZoteroData=o;var r="undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,i=e(r),a=0;n.GROUPED_NONE=a;var l=1;n.GROUPED_BY_TYPE=l;var s=2;n.GROUPED_BY_COLLECTION=s;var u=Symbol("childItems");n.CHILD_ITEMS_SYMBOL=u;var d=Symbol("groupExpanded");n.GROUP_EXPANDED_SUMBOL=d,o.prototype.groupByType=function(t){var e={};t=t||[];for(var n=this.raw.length;n--;){var o=this.raw[n];e[o.data.itemType]||(e[o.data.itemType]=[]),e[o.data.itemType].push(o),e[o.data.itemType][d]="all"===t||i["default"].contains(t,o.data.itemType)}this.data=e,this.grouped=l},o.prototype.groupByCollections=function(){throw new Error("groupByCollections is not implemented yet.")},o.prototype[Symbol.iterator]=function(){var t=this,e=0;if(!(this.grouped>0))return{next:function(){return{value:e<this.data.length?this.data[e]:null,done:e++>=this.data.length}}.bind(this)};var n=function(){var n=Object.keys(t.data);return{v:{next:function(){return{value:e<n.length?[n[e],this.data[n[e]]]:null,done:e++>=n.length}}.bind(t)}}}();return"object"==typeof n?n.v:void 0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/render.js":[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){return(0,c["default"])({item:t,data:t.data,childItemsMarkup:e||""})}function i(t){var e="",n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,d=l(u);e+=r(u,d)}}catch(p){o=!0,i=p}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return(0,y["default"])({zoteroItems:e})}function a(t){return(0,z["default"])({item:t})}function l(t){var e="";if(t[S.CHILD_ITEMS_SYMBOL]&&t[S.CHILD_ITEMS_SYMBOL].length>0){var n=!0,o=!1,r=void 0;try{for(var i,l=t[S.CHILD_ITEMS_SYMBOL][Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;e+=a(s)}}catch(u){o=!0,r=u}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw r}}}return(0,v["default"])({childItemsMarkup:e})}function s(t,e,n){return(0,h["default"])({title:t,itemsMarkup:n,expand:e})}function u(t){var e="",n=!0,o=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=p(a.value,2),d=u[0],f=u[1],c=i(f),_=f[S.GROUP_EXPANDED_SUMBOL];e+=s(d,_,c)}}catch(y){o=!0,r=y}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw r}}return(0,m["default"])({groupsMarkup:e})}function d(t,e){var n;n=e.grouped>0?u(e)+(0,M["default"])():i(e)+(0,M["default"])(),t.innerHTML=n,(0,I.addHandlers)(t)}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(s){r=!0,i=s}finally{try{!o&&l["return"]&&l["return"]()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.renderItem=r,n.renderCollection=i,n.renderChildItem=a,n.renderChildItems=l,n.renderGroup=s,n.renderGrouped=u,n.renderPublications=d;var f=t("./tpl/item.tpl"),c=o(f),_=t("./tpl/items.tpl"),y=o(_),b=t("./tpl/group.tpl"),h=o(b),g=t("./tpl/groups.tpl"),m=o(g),w=t("./tpl/child-items.tpl"),v=o(w),j=t("./tpl/child-item.tpl"),z=o(j),x=t("./tpl/branding.tpl"),M=o(x),I=t("./ui.js"),S=t("./data.js")},{"./data.js":"/srv/zotero/my-publications/src/js/data.js","./tpl/branding.tpl":"/srv/zotero/my-publications/src/js/tpl/branding.tpl","./tpl/child-item.tpl":"/srv/zotero/my-publications/src/js/tpl/child-item.tpl","./tpl/child-items.tpl":"/srv/zotero/my-publications/src/js/tpl/child-items.tpl","./tpl/group.tpl":"/srv/zotero/my-publications/src/js/tpl/group.tpl","./tpl/groups.tpl":"/srv/zotero/my-publications/src/js/tpl/groups.tpl","./tpl/item.tpl":"/srv/zotero/my-publications/src/js/tpl/item.tpl","./tpl/items.tpl":"/srv/zotero/my-publications/src/js/tpl/items.tpl","./ui.js":"/srv/zotero/my-publications/src/js/ui.js"}],"/srv/zotero/my-publications/src/js/tpl/branding.tpl":[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="zotero-branding">\n	Powered by Zotero\n</div>';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/child-item.tpl":[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<li>\n	"+(null==(__t=item.data.key)?"":_.escape(__t))+": "+(null==(__t=item.data.itemType)?"":_.escape(__t))+" \n</li>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/child-items.tpl":[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<ul class="zotero-child-items">\n	'+(null==(__t=childItemsMarkup)?"":__t)+"\n</ul>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/group.tpl":[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<li class="zotero-group'+(null==(__t=expand?" zotero-group-expanded":"")?"":_.escape(__t))+'" aria-expanded="'+(null==(__t=expand?" true":"false")?"":_.escape(__t))+'" >\n	<h3 class="zotero-group-title">'+(null==(__t=title)?"":_.escape(__t))+"</h3>\n	"+(null==(__t=itemsMarkup)?"":__t)+"\n</li>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/groups.tpl":[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<ul class="zotero-groups">\n	'+(null==(__t=groupsMarkup)?"":__t)+"\n</ul>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/item.tpl":[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<li class="zotero-item zotero-'+(null==(__t=data.itemType)?"":_.escape(__t))+'">\n	'+(null==(__t=item.citation)?"":__t)+"\n	",data.abstractNoteShort&&data.abstractNoteShort.length&&(__p+='\n    	<p class="zotero-abstract-short">\n    		'+(null==(__t=data.abstractNoteShort)?"":_.escape(__t))+'\n    		<a class="zotero-abstract-toggle" aria-controls="za-'+(null==(__t=item.key)?"":_.escape(__t))+'">...</a>\n    	</p>\n	'),__p+="\n	",data.abstractNote&&data.abstractNote.length&&(__p+='\n    	<p id="za-'+(null==(__t=item.key)?"":_.escape(__t))+'" class="zotero-abstract" aria-expanded="false">\n    		'+(null==(__t=data.abstractNote)?"":_.escape(__t))+'\n    		<a class="zotero-abstract-toggle">...</a>\n    	</p>\n	'),__p+="\n    "+(null==(__t=childItemsMarkup)?"":__t)+"\n</li>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/tpl/items.tpl":[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<ul class="zotero-items">\n	'+(null==(__t=zoteroItems)?"":__t)+"\n</ul>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/srv/zotero/my-publications/src/js/ui.js":[function(t,e,n){"use strict";function o(t){t.addEventListener("click",function(t){if(console.info(t),t.target.classList.contains("zotero-abstract-toggle")){var e=t.target.parentNode.parentNode.querySelector(".zotero-abstract-short"),n=t.target.parentNode.parentNode.querySelector(".zotero-abstract"),o=e.classList.toggle("zotero-abstract-expanded");n.setAttribute("aria-expanded",o?"true":"false")}if(t.target.classList.contains("zotero-group-title")){var r=t.target.parentNode,o=r.classList.toggle("zotero-group-expanded");r.setAttribute("aria-expanded",o?"true":"false")}})}Object.defineProperty(n,"__esModule",{value:!0}),n.addHandlers=o},{}]},{},["/srv/zotero/my-publications/src/js/app.js"])("/srv/zotero/my-publications/src/js/app.js")});